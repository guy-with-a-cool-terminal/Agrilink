<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - AgriLink</title>
    <link href="styles/tailwind-output.css" rel="stylesheet">
    <link href="styles/dashboard.css" rel="stylesheet">
    <link href="styles/main.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="bg-white w-64 flex-none border-r p-4">
            <div class="mb-8">
                <img src="images/logo.png" alt="AgriLink Logo" class="h-8">
            </div>
            <ul class="space-y-2">
                <li>
                    <a href="admin-dashboard.html" class="block py-2 px-4 rounded hover:bg-gray-100 font-medium text-gray-700">
                        Dashboard
                    </a>
                </li>
                <li>
                    <a href="#" class="block py-2 px-4 rounded hover:bg-gray-100 font-medium text-gray-700">
                        Products
                    </a>
                </li>
                <li>
                    <a href="#" class="block py-2 px-4 rounded hover:bg-gray-100 font-medium text-gray-700">
                        Orders
                    </a>
                </li>
                <li>
                    <a href="#" class="block py-2 px-4 rounded hover:bg-gray-100 font-medium text-gray-700">
                        Customers
                    </a>
                </li>
                <li>
                    <a href="#" class="block py-2 px-4 rounded hover:bg-gray-100 font-medium text-gray-700">
                        Analytics
                    </a>
                </li>
                <li>
                    <a href="#" class="block py-2 px-4 rounded hover:bg-gray-100 font-medium text-gray-700">
                        Settings
                    </a>
                </li>
                <li>
                    <a href="#" onclick="logout()" class="block py-2 px-4 rounded hover:bg-gray-100 font-medium text-gray-700">
                        Logout
                    </a>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-4">
            <!-- Header -->
            <header class="flex items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-semibold text-gray-800">Admin Dashboard</h2>
                    <p class="text-gray-500">Welcome, <span id="userName">Admin</span> (<span id="userRole"></span>)</p>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="refreshButton" onclick="refreshData()" class="btn-secondary">
                        ðŸ”„ Refresh Data
                    </button>
                    <button id="maintenanceToggle" onclick="toggleMaintenanceMode()" class="btn-primary">
                        ðŸ”§ Enable Maintenance
                    </button>
                </div>
            </header>

            <!-- Analytics Overview -->
            <section class="mb-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Analytics Overview</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-white shadow rounded-lg p-4">
                        <h4 class="font-semibold text-gray-600">Total Sales</h4>
                        <p class="text-2xl font-bold text-green-600" id="totalSales">Ksh 120,000</p>
                        <p class="text-sm font-medium text-green-600" id="salesGrowth">â†‘ 12% from last month</p>
                    </div>
                    <div class="bg-white shadow rounded-lg p-4">
                        <h4 class="font-semibold text-gray-600">Total Orders</h4>
                        <p class="text-2xl font-bold text-blue-600" id="totalOrders">450</p>
                        <p class="text-sm font-medium text-green-600" id="orderGrowth">â†‘ 5% from last month</p>
                    </div>
                    <div class="bg-white shadow rounded-lg p-4">
                        <h4 class="font-semibold text-gray-600">Total Users</h4>
                        <p class="text-2xl font-bold text-indigo-600" id="totalUsers">120</p>
                        <p class="text-sm font-medium text-red-600" id="userGrowth">â†“ 2% from last month</p>
                    </div>
                    <div class="bg-white shadow rounded-lg p-4">
                        <h4 class="font-semibold text-gray-600">Monthly Revenue</h4>
                        <p class="text-2xl font-bold text-purple-600" id="monthlyRevenue">Ksh 30,000</p>
                        <p class="text-sm font-medium text-green-600" id="revenueGrowth">â†‘ 8% from last month</p>
                    </div>
                    <div class="bg-white shadow rounded-lg p-4">
                        <h4 class="font-semibold text-gray-600">Pending Orders</h4>
                        <p class="text-2xl font-bold text-orange-600" id="pendingOrders">15</p>
                    </div>
                    <div class="bg-white shadow rounded-lg p-4">
                        <h4 class="font-semibold text-gray-600">Total Products</h4>
                        <p class="text-2xl font-bold text-teal-600" id="totalProducts">250</p>
                    </div>
                </div>
            </section>

            <!-- Product Metrics -->
            <section class="mb-8">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Product Metrics</h3>
                <div id="productMetrics">
                    <!-- Product metrics will be loaded here -->
                    Loading product metrics...
                </div>
            </section>

            <!-- User Management Section -->
            <section class="mb-8">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-800">User Management</h3>
                    <button onclick="showCreateUserModal()" class="btn-primary">âž• Create User</button>
                </div>
                <div class="overflow-x-auto">
                    <table id="usersTable" class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Name</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Email</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Role</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Status</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Joined Date</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- User rows will be dynamically added here -->
                            <tr>
                                <td colspan="6" class="text-center py-8">Loading users...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Order Management Section -->
            <section>
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Order Management</h3>
                <div class="overflow-x-auto">
                    <table id="ordersTable" class="min-w-full bg-white rounded-lg shadow overflow-hidden">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Order ID</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Items</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Customer</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Amount</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Status</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Order Date</th>
                                <th class="text-left py-3 px-4 font-medium text-gray-600">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Order rows will be dynamically added here -->
                            <tr>
                                <td colspan="7" class="text-center py-8">Loading orders...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </div>
    
    <!-- Scripts - Load modules first, then main dashboard -->
    <script src="scripts/auth.js"></script>
    <script src="scripts/api-client.js"></script>
    
    <!-- Admin modules -->
    <script src="scripts/admin/user-management.js"></script>
    <script src="scripts/admin/analytics.js"></script>
    <script src="scripts/admin/order-management.js"></script>
    
    <!-- Main admin dashboard -->
    <script src="scripts/admin-dashboard.js"></script>
</body>
</html>
